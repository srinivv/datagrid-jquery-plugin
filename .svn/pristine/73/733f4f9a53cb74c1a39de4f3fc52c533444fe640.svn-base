<%@ taglib prefix="s" uri="/struts-tags" %>

<%@ include file="common/rule-templates.jsp" %>
<script type="text/javascript" src="<%=request.getContextPath()%>/js/rule.js"></script>

<script  type="text/template" id="all-rules-template">
<@ if(total > 0) { @>
<h4 class="head1">Select the rule you want to view</h4>
<table class="countryListing" border="0" cellpadding="0" cellspacing="0" width="100%">
	<tbody>
		<tr>
           	<th width="30"><label class="label_check"><input type="checkbox" class="selectAllRules"></label></th>
			<th width="370">Rule Name</th>
			<th width="150"> Created Date</th>
			<th width="150"> Updated Date</th>
			<th class="relative" width="40"></th>
            </tr>
       </tbody>
</table>

<div class="tableList" >
<ul id="ruleresult">
<@ _.each(data, function(rule) { @>
	<li>   
		<table class="countryListing" border="0" cellpadding="0" cellspacing="0" width="100%">     
			<tbody>
				<tr class="deleteTR">
					<td width="30"><label class="label_check"><input class="ruleSelector" name="ruleSelector" value="<@= rule.ruleId @>" type="checkbox"></label></td>
					<td width="370">
						<strong class="nodeName"><@= rule.name @></strong> <br clear="left"/>
						<span class="activeStatus">active</span><br clear="left">
                    </td>
					<td width="150"> <@= rule.createdOn @> <br> <span class="createdBy">by <@= rule.createdBy @></span></td>
					<td width="150"> <@= rule.updatedOn @> <br> <span class="createdBy">by <@= rule.updatedBy @></span></td>
					<td width="40">
						<div class="posRel">
							<div class="delRow"> 
								<a title="Edit" href="rule_edit.do?ruleID=<@=rule.ruleId @>"> 
									<img class="paddingL3" src="images/edit-icon.png"> </a>&nbsp;<a title="Delete" href="javascript:deleteRule(<@= rule.ruleId @>)" class="delicon"> 
									<img src="images/delRow.png" align="delete"> 
								</a> 
							</div>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
       </li>
<@ }); @>
</ul>
</div>
<div class="optionsArea">
	<a id="deleteAllRules" class="tooltip disableButton" title="Delete All">
		<img src="images/dleteAll.jpg">
	</a>
</div>

<@ } else { @>
<h4 class="head1">No rules to display</h4>
<@ } @>
</script>

<script type="text/javascript">
$(document).ready(function() {

	rulesGrid = $("#allrules").datagrid({
		source : 'rule_load.do',
		template : 'all-rules-template',
		pagination : true
	});
	
});
toggleLeftNavigationMenus('rule');
$('#allRulesMenu').addClass('selectedState');
$('#createRuleMenu').removeClass('selectedState');
</script>

<div class="subHeading">
	<h1>Rules</h1>
</div>
<div id="ruleErrorMsg">
	<div class="messageSuccess" style="display:none;">You have successfully deleted the rule(s) </div>
	<div class="messageError unknowError" style="display:none;">An error occurred. Please see the log for more details</div>
</div>
<div id="allrules">
</div>
