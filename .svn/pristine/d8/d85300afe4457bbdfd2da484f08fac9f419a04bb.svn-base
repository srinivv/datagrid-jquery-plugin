<?xml version="1.0"?>
	<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- Mapping file autogenerated by MyEclipse - Hibernate Tools -->
<hibernate-mapping>
	<class name="com.cisco.apas.entity.AbstractRuleEntity" table="PSE_BUSINESS_RULE">
		<id name="id" type="long" unsaved-value="null">
			<column name="RULE_ID" />
		</id>

		<discriminator column="RULE_TYPE" type="string" />

		<property name="createdOn" type="timestamp">
			<column name="CREATED_ON" />
		</property>

		<property name="createdBy" type="string">
			<column name="CREATED_BY" />
		</property>
		<property name="updatedOn" type="timestamp">
			<column name="UPDATED_ON" />
		</property>
		<property name="updatedBy" type="string">
			<column name="UPDATED_BY" />
		</property>

		<property name="ruleName" type="string">
			<column name="RULE_NAME" />
		</property>

		<property name="ruleType" type="string" insert="false"
			update="false">
			<column name="RULE_TYPE" />
		</property>

		<property name="expression" type="string">
			<column name="RULE_EXPRESSION" />
		</property>

		<subclass name="com.cisco.apas.entity.Rule"
			discriminator-value="RULE">
			
			<property name="ruleStatus" type="string">
				<column name="RULE_STATUS"/>
			</property>

			<property name="effectiveStartDate" type="date">
				<column name="EFF_START_DATE" />
			</property>

			<property name="effectiveEndDate" type="date">
				<column name="EFF_END_DATE" />
			</property>
			<property name="nodeId" type="long">
				<column name="NODE_ID" />
			</property>
			
			<property name="routeToMarket" type="string">
				<column name="QUAL_RULE_FOR" />
			</property>
			
			<many-to-one name="node" column="NODE_ID" lazy="false" class="com.cisco.apas.entity.Node" insert="false" update="false"/>

			<bag name="scenarios" lazy="true" cascade="all">
				<key column="PARENT_RULE_ID" />
				<one-to-many class="com.cisco.apas.entity.Scenario" />
				<filter name="PARENT_RULE" condition=":RULE_ID = PARENT_RULE_ID" />
			</bag>
			

			<bag name="intendedUse" lazy="true" table="PSE_RULE_INTENDED_USE_MAP"
				cascade="all">
				<key column="RULE_ID" />
				<element column="INTENDED_USE" type="string" />
			</bag>

			<bag name="countries" lazy="true" cascade="all">
				<key column="RULE_ID" />
				<one-to-many class="com.cisco.apas.entity.Country" />
			</bag>

		</subclass>

		<subclass name="com.cisco.apas.entity.Scenario" discriminator-value="SCENARIO">

			<many-to-one name="rule" column="PARENT_RULE_ID" class="com.cisco.apas.entity.Rule" />

			<bag name="leaves" lazy="true" cascade="all">
				<key column="PARENT_RULE_ID" />
				<one-to-many class="com.cisco.apas.entity.Leaf" />
				<filter name="PARENT_RULE" condition=":RULE_ID = PARENT_RULE_ID" />
			</bag>
		</subclass>

		<subclass name="com.cisco.apas.entity.Leaf"	discriminator-value="LEAF">
			<property name="ruleExpressionType" type="string">
				<column name="RULE_EXPRESSION_TYPE" />
			</property>


			<many-to-one name="scenario" column="PARENT_RULE_ID"
				class="com.cisco.apas.entity.Scenario" />
			<property name="partnerType" type="string">
				<column name="PARTNER_TYPE" />
			</property>
			<property name="qualRuleFor" type="string">
				<column name="QUAL_RULE_FOR" />
			</property>
			<property name="qualRuleCountry" type="string">
				<column name="QUAL_RULE_COUNTRY" />
			</property>

		</subclass>
	</class>

</hibernate-mapping>