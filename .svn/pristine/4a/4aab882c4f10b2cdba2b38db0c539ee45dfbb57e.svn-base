<%@ taglib prefix="s" uri="/struts-tags" %>
<%@ include file="common/exception-templates.jsp" %>
<%@page import="com.cisco.apas.entity.Node"%>

<script type="text/javascript" src="<%=request.getContextPath()%>/js/exception.js"></script>

 <div class="partnerMainArea">
	<div class="subHeading">
	    <h1>Edit Partner Exception</h1>
	</div>

	<div id="partnerErrorMsg">
		<div class="messageError partnerError" style="display:none;">Please enter Partner Name.</div>
		<div class="messageError dateError" style="display:none;">Please select the start/end date.</div>
		<div class="messageError unknowError" style="display:none;">An error occurred. Please see the log for more details</div>
	</div>  

	<div class="partnerformarea">

	
			<input type="hidden" id="pdbGeoId" name="pdbGeoId" value="<s:property value="#request.PartnerException.Id.pdbGeoId" />">
			<input type="hidden" id="nodeId" name="nodeId" value="<s:property value="#request.PartnerException.Id.nodeId" />">
	
			<div id="ManualAddNode">
				<div class="box dealBox">
					<p>
						<label>Partner:<span class="error">*</span></label> <input
							type="text" class="input" id="partnerName" name="partnerName" disabled="disabled" value="<s:property value="#request.PartnerException.partnerName" /> (<s:property value="#request.PartnerException.Id.pdbGeoId" />)">
						<br clear="left" /> <small>(Enter Partner ID/Name)</small>
					</p>
					<p>
						<span class="boxWidthSmall alignleft"> <label>Start
								Date:<span class="error">*</span>
						</label> <input id="startDate" name="startDate" type="text"
							class="input datepicker" disabled="disabled" value="<s:property value="#request.PartnerException.startDateStr" />">

						</span> <span class="boxWidthSmall alignright"> <label>End
								Date:<span class="error">*</span>
						</label> <input type="text" id="endDate" name="endDate"
							class="input datepicker" readonly="readonly" value ="<s:property value="#request.PartnerException.endDateStr" />">
						</span>

					</p>
					<div class="clear"></div>
				</div>
				<div class="box dealBox1">

					<p>
						<label>Exception Description:</label>
						<textarea id="description" name="description" type="text"
							class="textarea"><s:property value="#request.PartnerException.partnerDescription" /></textarea>
					</p>
					<div class="clear"></div>
					<div class="formButtonArea">
						<input type="button" value="Update Exception"
							id="updatePartnerException" class="formButton addException" /> <a
							href="partnerException.do" class="cancelExp disableBTN">Cancel</a>
					</div>
				</div>
				<div class="clear"></div>
			</div>

			<div class="clear"></div>
	
	</div>
	<div class="partnersuccesArea">
    	<p>You have successfully updated Partner Exception</p>
		<a href="partnerException.do">View Partner Exception</a>
		<a href="javascript://" class="editpartner">Edit Partner Exception</a>
	</div>
</div> 
<link rel="stylesheet" type="text/css" href="<%=request.getContextPath()%>/css/jquery-ui-apas.css" />
<script>
	toggleLeftNavigationMenus('partnerexception');
	
	$(document).ready(function() {
		// Partner search by id / name
	    $( "#partnerName" ).autocomplete({
	        minLength: 3,
	        search: function(event, ui) { 
	        	$('.loader').hide();
	            $(this).addClass('spinner');
	        },
	        open: function(event, ui) {
	        	$('.loader').hide();
	            $(this).removeClass('spinner');
	        },
	        source:   function (request, response) {
	            $.getJSON("partnerException_searchPartnerName.do", { term: $( "#partnerName" ).val() }, response);
	        },
	        select: function( event, ui ) {
	        	var selectedValue = ui.item.value;
	        	$( "#pdbGeoId" ).val(selectedValue);
	        	
	        	if (selectedValue.lastIndexOf("(")) {
	        		selectedValue = selectedValue.substring(selectedValue.lastIndexOf("(")+1, selectedValue.lastIndexOf(")"));
	        	} else {
	        		selectedValue = '';
	        	}
	        	
	        	$( "#partnerName" ).val(selectedValue);
	            return false;
	        }
	    });
	});
	
</script>